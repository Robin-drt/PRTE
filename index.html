<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Présence par QR Code</title>
<style>
body { font-family: Arial, sans-serif; margin: 30px; }
h1, h2 { margin-bottom: 10px; }
.card { border: 1px solid #ccc; border-radius: 10px; padding: 20px; max-width: 500px; margin-bottom: 20px; }
input, button, select { width: 100%; padding: 10px; margin-top: 10px; }
#qrcode { margin-top: 20px; }
ul { padding-left: 20px; }
</style>
<!-- QRCode.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>


<h1>Gestion des présences par QR Code</h1>


<div class="card">
<h2>Créer un cours / générer QR code</h2>
<input id="courseName" placeholder="Nom du cours" />
<button onclick="generateQRCode()">Générer QR code</button>
<div id="qrcode"></div>
</div>


<div class="card">
<h2>Élève - Pointer sa présence</h2>
<select id="selectCourse"></select>
<input id="studentName" placeholder="Votre nom" />
<button onclick="markPresence()">Je suis présent</button>
<p id="status"></p>
</div>


<div class="card">
<h2>Professeur - Liste des présents</h2>
<select id="selectCoursePDF"></select>
<button onclick="downloadPDF()">Télécharger PDF</button>
<ul id="presentList"></ul>
</div>


<script>
// Stockage local des présences par cours
let courses = {}; // { 'NomCours': ['Alice','Bob'] }


function generateQRCode() {
const course = document.getElementById('courseName').value.trim();
if (!course) return alert('Veuillez entrer un nom de cours');


// créer le QR code (URL fictive locale)
const qrDiv = document.getElementById('qrcode');
qrDiv.innerHTML = '';
new QRCode(qrDiv, {
text: `http://exemple.com/course/${encodeURIComponent(course)}`,
width: 200,
height: 200
});


// ajouter le cours aux listes et stockage local
if (!courses[course]) {
courses[course] = [];
const sel = document.getElementById('selectCourse');
const opt = document.createElement('option'); opt.value = course; opt.textContent = course; sel.appendChild(opt);
const selPDF = document.getElementById('selectCoursePDF');
</html>
</script>

</body>
</html>
